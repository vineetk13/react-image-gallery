{"version":3,"sources":["masonry.js","photoTile.js","apiHandle.js","modal.js","feedContainer.js","App.js","index.js"],"names":["Masonry","props","state","columns","onResize","bind","this","window","addEventListener","w","brakePoints","reduceRight","p","c","i","length","getColumns","refs","offsetWidth","setState","col","numC","push","children","reduce","className","ref","mapChildren","map","ci","key","child","React","Component","PhotoTile","memo","id","onClick","handleModal","src","fetchPhoto","a","imgId","fetch","process","response","json","ans","console","log","Modal","useState","currentImg","setCurrentImg","useEffect","fetchFromApi","fetchedPhoto","style","transform","open","opacity","undefined","urls","small","photos","findIndex","img","prevId","nextId","FeedContainer","results","setResults","isFetching","setIsFetching","isModalOpen","setIsModalOpen","modalId","setModalId","handleScroll","then","res","catch","err","removeEventListener","prevState","innerHeight","document","documentElement","scrollTop","offsetHeight","image","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.528da7f2.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass Masonry extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {columns: 1};\r\n\t\tthis.onResize = this.onResize.bind(this);\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.onResize();\r\n\t\twindow.addEventListener('resize', this.onResize)\t\r\n\t}\r\n\t\r\n\tgetColumns(w){\r\n\t\treturn this.props.brakePoints.reduceRight( (p, c, i) => {\r\n\t\t\treturn c < w ? p : i;\r\n\t\t}, this.props.brakePoints.length) + 1;\r\n\t}\r\n\t\r\n\tonResize(){\r\n\t\tconst columns = this.getColumns(this.refs.Masonry.offsetWidth);\r\n\t\tif(columns !== this.state.columns){\r\n\t\t\tthis.setState({columns: columns});\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tmapChildren(){\r\n\t\tlet col = [];\r\n\t\tconst numC = this.state.columns;\r\n\t\tfor(let i = 0; i < numC; i++){\r\n\t\t\tcol.push([]);\r\n\t\t}\r\n\t\treturn this.props.children.reduce((p,c,i) => {\r\n\t\t\tp[i%numC].push(c);\r\n\t\t\treturn p;\r\n\t\t}, col);\r\n\t}\r\n\t\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"masonry\" ref=\"Masonry\">\r\n\t\t\t\t{this.mapChildren().map((col, ci) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"column\" key={ci} >\r\n\t\t\t\t\t\t\t{col.map((child, i) => {\r\n\t\t\t\t\t\t\t\treturn <div key={i} >{child}</div>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Masonry;","import React from 'react';\r\n\r\nexport const PhotoTile = React.memo((props) => {\r\n    // console.log(id);\r\n    return (\r\n        <div key={props.id} onClick={()=>props.handleModal(props.id)} className=\"tile\">\r\n            <img className=\"image-tile\" src={props.src} />\r\n        </div>\r\n    );\r\n  });","export const fetchPhoto = async (id) => {\r\n    const imgId = id; \r\n    const response = await fetch(`https://api.unsplash.com/photos/${imgId}?client_id=${process.env.REACT_APP_KEY}&fit=crop&h=400`);\r\n    const ans = await response.json();\r\n    console.log(ans);\r\n    return ans;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport {fetchPhoto} from './apiHandle';\r\n\r\nconst Modal = (props) => {\r\n    const [currentImg, setCurrentImg] = useState(null);\r\n    useEffect(()=>{\r\n        fetchFromApi(props.id);\r\n    },[])\r\n    const handleNext = () => {\r\n        let i = props.photos.findIndex((img)=>currentImg.id===img.id);\r\n        if(i<props.photos.length){\r\n            var nextId = props.photos[++i].id;\r\n            fetchFromApi(nextId);\r\n        }\r\n    }\r\n    const handlePrev = () => {\r\n        let i = props.photos.findIndex((img)=>currentImg.id===img.id);\r\n        if(i>0){\r\n            var prevId = props.photos[--i].id;\r\n            fetchFromApi(prevId);\r\n        }\r\n    }\r\n    const fetchFromApi = async (id) => {\r\n        const fetchedPhoto = await fetchPhoto(id);\r\n        setCurrentImg(fetchedPhoto);\r\n    }\r\n    return (\r\n        <div className=\"modal\" style={{\r\n            transform:props.open ? 'translateY(0)' : 'translateY(-100vh)',\r\n            opacity : props.open ? 1 : 0\r\n        }}>\r\n            <span className=\"close-btn\" onClick={props.handleModal}>&#10060;</span>\r\n            <div className=\"imgc\">\r\n            {currentImg!==null && currentImg.urls!==undefined ? <img className=\"modal-img\" src={currentImg.urls.small} /> : null}\r\n            </div>\r\n            <button onClick={handlePrev} className=\"prev-btn\">&larr;</button>\r\n            <button onClick={handleNext} className=\"next-btn\">&rarr;</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Modal;","import React,{useState, useEffect} from 'react';\r\n\r\nimport Masonry from './masonry';\r\nimport {PhotoTile} from './photoTile';\r\nimport Modal from './modal';\r\n\r\nconst FeedContainer = () => {\r\n    const [results, setResults] = useState([]);\r\n    const [isFetching, setIsFetching] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [modalId, setModalId] = useState(\"\");\r\n    \r\n    useEffect(()=>{\r\n        window.addEventListener('scroll', handleScroll);\r\n        fetch(\"https://api.unsplash.com/photos/random?client_id=CSEtI7CL_AudzbRDMgR2_aOUdVapCfwcvRwLCyNyap0&count=25\")\r\n        .then(res=>res.json())\r\n        .then(ans=>setResults([...ans]))\r\n        .catch(err=>console.log(err));\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    },[]);\r\n\r\n    useEffect(()=>{\r\n        if(!isFetching) return;\r\n        fetch(\"https://api.unsplash.com/photos/random/?client_id=CSEtI7CL_AudzbRDMgR2_aOUdVapCfwcvRwLCyNyap0&count=30\")\r\n        .then(res=>res.json())\r\n        .then(ans=>setResults(prevState=>([...prevState,...ans])));\r\n    },[isFetching])\r\n\r\n\r\n    const handleScroll = () => {\r\n        if (window.innerHeight + document.documentElement.scrollTop !== document.documentElement.offsetHeight) return;\r\n        // console.log('Fetching more list items...');\r\n        setIsFetching(true);\r\n    }\r\n\r\n    const handleModal = (id) => {\r\n        setModalId(id);\r\n        setIsModalOpen(!isModalOpen);\r\n    }\r\n\r\n    return (\r\n        <div className=\"masonry-container\">\r\n            {isModalOpen && <Modal photos={results} id={modalId} open={isModalOpen} handleModal={handleModal} />}\r\n            <Masonry brakePoints={[350, 500, 750]}>\r\n                {results.map((image)=>{\r\n                    return (\r\n                    <PhotoTile src={image.urls.small} id={image.id} handleModal={handleModal} />\r\n                    ) \r\n                })\r\n                }\r\n            </Masonry>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FeedContainer;\r\n","import React from \"react\";\nimport \"./App.css\";\n\nimport FeedContainer from './feedContainer';\n\nclass App extends React.Component {\n  render(){\n    return (\n      <div className=\"app\">\n        <h1>Photo Feed</h1>\n        <FeedContainer />\n      </div>\n    );\n  }\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}